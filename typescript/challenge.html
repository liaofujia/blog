<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScriptè‡ªå®šä¹‰å·¥å…·ç±»å‹ | å†²ç ´æŸç¼šçš„å¤©èåº§</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="web.png">
    <meta name="description" content="ä¸€åä¸“æ³¨å‰ç«¯å¼€å‘çš„åºŸç‰©">
    
    <link rel="preload" href="/blog/assets/css/0.styles.e92431cb.css" as="style"><link rel="preload" href="/blog/assets/js/app.3faf3b5a.js" as="script"><link rel="preload" href="/blog/assets/js/2.f21ef004.js" as="script"><link rel="preload" href="/blog/assets/js/44.be0279d9.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.6c00c5ec.js"><link rel="prefetch" href="/blog/assets/js/11.46339c4b.js"><link rel="prefetch" href="/blog/assets/js/12.41d24a22.js"><link rel="prefetch" href="/blog/assets/js/13.c887e290.js"><link rel="prefetch" href="/blog/assets/js/14.a721a174.js"><link rel="prefetch" href="/blog/assets/js/15.0e792442.js"><link rel="prefetch" href="/blog/assets/js/16.e6f103b8.js"><link rel="prefetch" href="/blog/assets/js/17.32a8ae99.js"><link rel="prefetch" href="/blog/assets/js/18.bc6047c5.js"><link rel="prefetch" href="/blog/assets/js/19.bd558192.js"><link rel="prefetch" href="/blog/assets/js/20.30fcf379.js"><link rel="prefetch" href="/blog/assets/js/21.57070a5c.js"><link rel="prefetch" href="/blog/assets/js/22.d1c6053d.js"><link rel="prefetch" href="/blog/assets/js/23.7f8ffe88.js"><link rel="prefetch" href="/blog/assets/js/24.bfef35ca.js"><link rel="prefetch" href="/blog/assets/js/25.4aaafe0f.js"><link rel="prefetch" href="/blog/assets/js/26.5eefef23.js"><link rel="prefetch" href="/blog/assets/js/27.780fe627.js"><link rel="prefetch" href="/blog/assets/js/28.568829f3.js"><link rel="prefetch" href="/blog/assets/js/29.d3b22c8c.js"><link rel="prefetch" href="/blog/assets/js/3.eecce71b.js"><link rel="prefetch" href="/blog/assets/js/30.3a6e50ec.js"><link rel="prefetch" href="/blog/assets/js/31.50133f3c.js"><link rel="prefetch" href="/blog/assets/js/32.f89fd996.js"><link rel="prefetch" href="/blog/assets/js/33.de2fe35b.js"><link rel="prefetch" href="/blog/assets/js/34.254ed816.js"><link rel="prefetch" href="/blog/assets/js/35.a881d1bd.js"><link rel="prefetch" href="/blog/assets/js/36.8414a4c4.js"><link rel="prefetch" href="/blog/assets/js/37.d8d2776d.js"><link rel="prefetch" href="/blog/assets/js/38.6b34add3.js"><link rel="prefetch" href="/blog/assets/js/39.bbd624b6.js"><link rel="prefetch" href="/blog/assets/js/4.228b9cee.js"><link rel="prefetch" href="/blog/assets/js/40.4c5f272f.js"><link rel="prefetch" href="/blog/assets/js/41.76207b1d.js"><link rel="prefetch" href="/blog/assets/js/42.02fd675c.js"><link rel="prefetch" href="/blog/assets/js/43.d48b41ae.js"><link rel="prefetch" href="/blog/assets/js/45.39ce449d.js"><link rel="prefetch" href="/blog/assets/js/46.9bfcf467.js"><link rel="prefetch" href="/blog/assets/js/5.9d94d376.js"><link rel="prefetch" href="/blog/assets/js/6.c6045601.js"><link rel="prefetch" href="/blog/assets/js/7.8e3dff59.js"><link rel="prefetch" href="/blog/assets/js/8.bc56b455.js"><link rel="prefetch" href="/blog/assets/js/9.9654334a.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.e92431cb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">å†²ç ´æŸç¼šçš„å¤©èåº§</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/interview/" class="nav-link">
  å‰ç«¯å…«è‚¡æ–‡
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯ä¹¦ç±" class="dropdown-title"><span class="title">å‰ç«¯ä¹¦ç±</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯ä¹¦ç±" class="mobile-dropdown-title"><span class="title">å‰ç«¯ä¹¦ç±</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/books/" class="nav-link">
  JavaScriptè®¾è®¡æ¨¡å¼
</a></li></ul></div></div><div class="nav-item"><a href="/blog/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/blog/typescript/" class="nav-link router-link-active">
  typescript
</a></div><div class="nav-item"><a href="/blog/advance/prettier.html" class="nav-link">
  å‰ç«¯è¿›é˜¶
</a></div><div class="nav-item"><a href="/blog/automate/" class="nav-link">
  å‰ç«¯è‡ªåŠ¨åŒ–éƒ¨ç½²
</a></div><div class="nav-item"><a href="/blog/git/" class="nav-link">
  Git
</a></div><div class="nav-item"><a href="/blog/other/css.html" class="nav-link">
  å¸¸è§é—®é¢˜
</a></div> <a href="https://github.com/liaofujia/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/interview/" class="nav-link">
  å‰ç«¯å…«è‚¡æ–‡
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯ä¹¦ç±" class="dropdown-title"><span class="title">å‰ç«¯ä¹¦ç±</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯ä¹¦ç±" class="mobile-dropdown-title"><span class="title">å‰ç«¯ä¹¦ç±</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/books/" class="nav-link">
  JavaScriptè®¾è®¡æ¨¡å¼
</a></li></ul></div></div><div class="nav-item"><a href="/blog/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/blog/typescript/" class="nav-link router-link-active">
  typescript
</a></div><div class="nav-item"><a href="/blog/advance/prettier.html" class="nav-link">
  å‰ç«¯è¿›é˜¶
</a></div><div class="nav-item"><a href="/blog/automate/" class="nav-link">
  å‰ç«¯è‡ªåŠ¨åŒ–éƒ¨ç½²
</a></div><div class="nav-item"><a href="/blog/git/" class="nav-link">
  Git
</a></div><div class="nav-item"><a href="/blog/other/css.html" class="nav-link">
  å¸¸è§é—®é¢˜
</a></div> <a href="https://github.com/liaofujia/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/blog/typescript/" aria-current="page" class="sidebar-link">TypeScriptä»‹ç»</a></li><li><a href="/blog/typescript/base.html" class="sidebar-link">TypeScriptåŸºç¡€</a></li><li><a href="/blog/typescript/advance.html" class="sidebar-link">TypeScriptè¿›é˜¶</a></li><li><a href="/blog/typescript/challengeBuildIn.html" class="sidebar-link">TypeScriptå†…ç½®å·¥å…·ç±»å‹</a></li><li><a href="/blog/typescript/challenge.html" aria-current="page" class="active sidebar-link">TypeScriptè‡ªå®šä¹‰å·¥å…·ç±»å‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#first" class="sidebar-link">First</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#mutable" class="sidebar-link">Mutable</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#length" class="sidebar-link">Length</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#if" class="sidebar-link">If</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#concat" class="sidebar-link">Concat</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#includes" class="sidebar-link">Includes</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#push" class="sidebar-link">Push</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#unshift" class="sidebar-link">Unshift</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#promisetype" class="sidebar-link">PromiseType</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#æŒ‰éœ€readonly" class="sidebar-link">æŒ‰éœ€Readonly</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#deepreadonly" class="sidebar-link">DeepReadonly</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#tupletounion" class="sidebar-link">TupleToUnion</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#last" class="sidebar-link">Last</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#chainable-å¯ä¸²è”æ„é€ å™¨" class="sidebar-link">Chainable(å¯ä¸²è”æ„é€ å™¨)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#pop" class="sidebar-link">Pop</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#lookup-æŸ¥æ‰¾" class="sidebar-link">LookUp(æŸ¥æ‰¾)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#promiseallè¿”å›ç±»å‹" class="sidebar-link">PromiseAllè¿”å›ç±»å‹</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#trimã€trimleftä»¥åŠtrimright" class="sidebar-link">Trimã€TrimLeftä»¥åŠTrimRight</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#uncapatilize-é¦–å­—æ¯å°å†™" class="sidebar-link">Uncapatilize(é¦–å­—æ¯å°å†™)</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#replace" class="sidebar-link">Replace</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#replaceall" class="sidebar-link">ReplaceAll</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#appendargument-å‡½æ•°è¿½åŠ å½¢å‚" class="sidebar-link">AppendArgumentï¼ˆå‡½æ•°è¿½åŠ å½¢å‚ï¼‰</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#permutation" class="sidebar-link">Permutation</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#lengthofstring" class="sidebar-link">LengthOfString</a></li><li class="sidebar-sub-header"><a href="/blog/typescript/challenge.html#flatten-æ•°ç»„é™ç»´" class="sidebar-link">Flatten(æ•°ç»„é™ç»´)</a></li></ul></li><li><a href="/blog/typescript/tsconfig.html" class="sidebar-link">tsconfig.jsonä»‹ç»</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="typescriptè‡ªå®šä¹‰å·¥å…·ç±»å‹"><a href="#typescriptè‡ªå®šä¹‰å·¥å…·ç±»å‹" class="header-anchor">#</a> TypeScriptè‡ªå®šä¹‰å·¥å…·ç±»å‹</h1> <h2 id="first"><a href="#first" class="header-anchor">#</a> First</h2> <blockquote><p><code>First</code>è¡¨ç¤ºç”¨æ¥è¿”å›æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">arr1</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name">arr2</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>

<span class="token keyword">type</span> <span class="token class-name">one</span> <span class="token operator">=</span> First<span class="token operator">&lt;</span>arr1<span class="token operator">&gt;</span> <span class="token comment">// 'a'</span>
<span class="token keyword">type</span> <span class="token class-name">two</span> <span class="token operator">=</span> First<span class="token operator">&lt;</span>arr2<span class="token operator">&gt;</span> <span class="token comment">// 3</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code>ç´¢å¼•å®ç°
<span class="token keyword">type</span> <span class="token class-name">First<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
or
å ä½å®ç°
<span class="token keyword">type</span> <span class="token class-name">First<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> Head<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span> <span class="token operator">?</span> Head <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>T extends []</code>ï¼šç”¨äºåˆ¤æ–­ <code>T</code> æ˜¯å¦æ˜¯ç©ºæ•°ç»„</li> <li><code>T[0]</code>ï¼šç”¨äºå–æ•°ç»„çš„ç¬¬ä¸€é¡¹</li> <li><code>infer Head</code>ï¼šè¡¨ç¤ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å ä½</li> <li><code>...rest</code>ï¼šè¡¨ç¤ºæ•°ç»„çš„å‰©ä½™å…ƒç´ </li></ul> <h2 id="mutable"><a href="#mutable" class="header-anchor">#</a> Mutable</h2> <blockquote><p><code>Mutable&lt;T&gt;</code>è¡¨ç¤ºå°†æŸä¸ªç±»å‹ä¸­çš„æ‰€æœ‰å±æ€§çš„readonlyç§»é™¤ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">UserInfo</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token keyword">readonly</span> age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token comment">// {name: string, age: number}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">D</span></span> <span class="token operator">=</span> Mutable<span class="token operator">&lt;</span>UserInfo<span class="token operator">&gt;</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Mutable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">-</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>-readonly</code>ï¼šè¡¨ç¤ºæŠŠ<code>readonly</code>å…³é”®å­—å»æ‰</li></ul> <h2 id="length"><a href="#length" class="header-anchor">#</a> Length</h2> <blockquote><p><code>Length&lt;T&gt;</code>è¡¨ç¤ºç”¨æ¥è·å–ä¸€ä¸ªæ•°ç»„æˆ–è€…ç±»æ•°ç»„çš„é•¿åº¦ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">tesla</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token string">'3'</span><span class="token punctuation">,</span> length<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">spaceX</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'FALCON 9'</span><span class="token punctuation">,</span> <span class="token string">'FALCON HEAVY'</span><span class="token punctuation">,</span> <span class="token string">'DRAGON'</span><span class="token punctuation">,</span> <span class="token string">'STARSHIP'</span><span class="token punctuation">,</span> <span class="token string">'HUMAN SPACEFLIGHT'</span><span class="token punctuation">]</span>

<span class="token keyword">type</span> <span class="token class-name">length1</span> <span class="token operator">=</span> Length<span class="token operator">&lt;</span>tesla<span class="token operator">&gt;</span> <span class="token comment">// 4</span>
<span class="token keyword">type</span> <span class="token class-name">length2</span> <span class="token operator">=</span> Length<span class="token operator">&lt;</span>spaceX<span class="token operator">&gt;</span> <span class="token comment">// 5</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Length<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span>length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">}</span> <span class="token operator">?</span>  <span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>T extends { length: number; }</code>ï¼šåˆ¤æ–­<code>T</code>æ˜¯å¦æ˜¯<code>{length: number}</code>çš„å­ç±»å‹</li> <li><code>T['length']</code>ï¼šåœ¨TypeScriptä¸­ä¸èƒ½ä½¿ç”¨ <code>.</code> è¯­æ³•æ¥å–å€¼ï¼Œå¿…é¡»ä½¿ç”¨ <code>[]</code> è¯­æ³•</li></ul> <h2 id="if"><a href="#if" class="header-anchor">#</a> If</h2> <blockquote><p><code>If&lt;T, C, F&gt;</code>è¡¨ç¤ºå®ƒæ¥æ”¶ä¸€ä¸ªæ¡ä»¶ç±»å‹ <code>T</code> ï¼Œä¸€ä¸ªåˆ¤æ–­ä¸ºçœŸæ—¶çš„è¿”å›ç±»å‹ <code>C</code> ï¼Œä»¥åŠä¸€ä¸ªåˆ¤æ–­ä¸ºå‡æ—¶çš„è¿”å›ç±»å‹ <code>F</code>ã€‚ <code>T</code> åªèƒ½æ˜¯ <code>true</code> æˆ–è€… <code>false</code>ï¼Œ <code>C</code> å’Œ <code>F</code> å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">a</span> <span class="token operator">=</span> If<span class="token operator">&lt;</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token operator">&gt;</span> <span class="token comment">// 'a'</span>
<span class="token keyword">type</span> <span class="token class-name">b</span> <span class="token operator">=</span> If<span class="token operator">&lt;</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token operator">&gt;</span> <span class="token comment">// 'b'</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">If<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token punctuation">,</span> <span class="token constant">F</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token boolean">true</span></span> <span class="token operator">?</span> <span class="token constant">C</span> <span class="token operator">:</span> <span class="token constant">F</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>T extends boolean</code>ï¼šè¡¨ç¤º <code>T</code> ç±»å‹ä¸º <code>boolean</code> ç±»å‹çš„å­ç±»å‹ï¼Œå³ <code>T</code> åªèƒ½æ¥æ”¶ <code>true</code> æˆ–è€… <code>false</code></li> <li><code>T extends true</code>ï¼šå†™åœ¨ä¸‰å…ƒè¡¨è¾¾å¼ä¸­ï¼Œç”¨äºåˆ¤æ–­ <code>T</code> æ˜¯å¦ä¸º <code>true</code></li></ul> <h2 id="concat"><a href="#concat" class="header-anchor">#</a> Concat</h2> <blockquote><p><code>Concat&lt;T, U&gt;</code>è¡¨ç¤ºè¿™ä¸ªç±»å‹æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¿”å›çš„æ–°æ•°ç»„ç±»å‹åº”è¯¥æŒ‰ç…§è¾“å…¥å‚æ•°ä»å·¦åˆ°å³çš„é¡ºåºåˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// [1,2]</span>
<span class="token keyword">type</span> <span class="token class-name">Result</span> <span class="token operator">=</span> Concat<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Concat<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">U</span><span class="token punctuation">]</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>T extends any[]</code>ï¼šç”¨æ¥é™åˆ¶Tæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœä¼ é€’éæ•°ç»„ä¼šæŠ¥é”™ï¼ŒUä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ã€‚</li> <li><code>[...T, ...U]</code>ï¼šå¯ä»¥ç†è§£æˆJavaScriptçš„æ‰©å±•è¿ç®—ç¬¦ <code>...</code> ã€‚</li></ul> <h2 id="includes"><a href="#includes" class="header-anchor">#</a> Includes</h2> <blockquote><p><code>Includes&lt;Tï¼Œ U&gt;</code>è¡¨ç¤ºè¿™ä¸ªç±»å‹æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç”¨äºåˆ¤æ–­ <code>U</code> æ˜¯å¦åœ¨æ•°ç»„ <code>T</code> ä¸­ï¼Œç±»ä¼¼å®ç°æ•°ç»„çš„ <code>includes</code> æ–¹æ³•ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">isPillarMen</span> <span class="token operator">=</span> Includes<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">'Kars'</span><span class="token punctuation">,</span> <span class="token string">'Esidisi'</span><span class="token punctuation">,</span> <span class="token string">'Wamuu'</span><span class="token punctuation">,</span> <span class="token string">'Santana'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'Dio'</span><span class="token operator">&gt;</span> <span class="token comment">// false</span>

<span class="token comment">// ä½¿ç”¨ç®€å•ç‰ˆï¼šé¢„æœŸæ˜¯falseï¼Œå®é™…æ˜¯true</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Includes<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'A'</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code>ç®€å•ç‰ˆ
<span class="token keyword">type</span> <span class="token class-name">Includes<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>

å®Œæ•´ç‰ˆ
<span class="token keyword">type</span> <span class="token class-name">Equal<span class="token operator">&lt;</span><span class="token constant">X</span><span class="token punctuation">,</span> <span class="token constant">Y</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">X</span></span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">extends</span>
  <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">Y</span></span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>

<span class="token keyword">type</span> <span class="token class-name">Includes<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
<span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> First <span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">]</span> 
  <span class="token operator">?</span> 
    Equal<span class="token operator">&lt;</span>First<span class="token punctuation">,</span><span class="token constant">U</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token boolean">true</span></span> 
    <span class="token operator">?</span> 
      <span class="token boolean">true</span> 
    <span class="token operator">:</span> Includes<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span><span class="token constant">U</span><span class="token operator">&gt;</span> 
  <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token comment">// false</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> Includes<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'A'</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code>Equal<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">&gt;</span>

å…ˆåˆ†æ<span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span>ï¼Œå‡å®š<span class="token constant">T</span>ä¸º<span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> ä¸º<span class="token boolean">true</span>ï¼Œ <span class="token function">ç»“æœ</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span>
<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span>

å†åˆ†æ<span class="token builtin">string</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span>ï¼Œ<span class="token builtin">string</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span> ä¸º<span class="token boolean">false</span>ï¼Œ     <span class="token function">ç»“æœ</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">2</span>
<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span>

<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">2</span> <span class="token comment">// false</span>
</code></pre></div><h2 id="push"><a href="#push" class="header-anchor">#</a> Push</h2> <blockquote><p><code>Push&lt;T, U&gt;</code>è¡¨ç¤ºå°†Uç±»å‹æ·»åŠ åˆ°Tç±»å‹ï¼Œå¹¶ä½œä¸ºTç±»å‹çš„æœ€åä¸€é¡¹ã€‚</p></blockquote> <p>ç”¨ä¾‹ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// [1,2,'3']</span>
<span class="token keyword">type</span> <span class="token class-name">Result</span> <span class="token operator">=</span> Push<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token operator">&gt;</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// [1,2,'3']</span>
<span class="token keyword">type</span> <span class="token class-name">Push<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">]</span>
</code></pre></div><h2 id="unshift"><a href="#unshift" class="header-anchor">#</a> Unshift</h2> <blockquote><p><code>Unshift&lt;T, U&gt;</code>è¡¨ç¤ºå°†Uç±»å‹æ·»åŠ åˆ°Tç±»å‹ï¼Œå¹¶ä½œä¸ºTç±»å‹çš„ç¬¬ä¸€é¡¹ã€‚</p></blockquote> <p>ç”¨ä¾‹ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ['3', 1, 2]</span>
<span class="token keyword">type</span> <span class="token class-name">Result</span> <span class="token operator">=</span> Unshift<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token operator">&gt;</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ['3', 1, 2]</span>
<span class="token keyword">type</span> <span class="token class-name">Unshift<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">U</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">]</span>
</code></pre></div><h2 id="promisetype"><a href="#promisetype" class="header-anchor">#</a> PromiseType</h2> <blockquote><p><code>PromiseType&lt;T&gt;</code>ç”¨æ¥è·å–<code>Promise</code>åŒ…è£¹ç±»å‹ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">getInfo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// ç»“æœï¼š(ï¼‰ =&gt; Promise&lt;string|number&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">funcType</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> getInfo
<span class="token comment">// ç»“æœï¼šPromise&lt;string|number&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">returnResult</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span>funcType<span class="token operator">&gt;</span>
<span class="token comment">// ç»“æœï¼šstring|number</span>
<span class="token keyword">type</span> <span class="token class-name">PromiseResult</span> <span class="token operator">=</span> PromiseType<span class="token operator">&lt;</span>returnResult<span class="token operator">&gt;</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">PromiseType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>T extends Promise&lt;infer R&gt;</code>ï¼šåˆ¤æ–­ <code>T</code> æ˜¯å¦æ˜¯ <code>Promise&lt;infer R&gt;</code> çš„å­ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´Tå¿…é¡»æ»¡è¶³ <code>Promise&lt;any&gt;</code> çš„å½¢å¼ã€‚</li></ul> <h2 id="æŒ‰éœ€readonly"><a href="#æŒ‰éœ€readonly" class="header-anchor">#</a> æŒ‰éœ€Readonly</h2> <blockquote><p><code>Readonly&lt;T, K&gt;</code> KæŒ‡å®šåº”è®¾ç½®ä¸ºReadonlyçš„Tçš„å±æ€§é›†ã€‚å¦‚æœæœªæä¾›Kï¼Œåˆ™åº”ä½¿æ‰€æœ‰å±æ€§éƒ½å˜ä¸ºåªè¯»ï¼Œå°±åƒæ™®é€šçš„ <code>Readonly&lt;T&gt;</code> ä¸€æ ·ã€‚</p></blockquote> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Todo</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span>
  description<span class="token operator">:</span> <span class="token builtin">string</span>
  completed<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> todo<span class="token operator">:</span> MyReadonly2<span class="token operator">&lt;</span>Todo<span class="token punctuation">,</span> <span class="token string">'title'</span> <span class="token operator">|</span> <span class="token string">'description'</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">&quot;Hey&quot;</span><span class="token punctuation">,</span>
  description<span class="token operator">:</span> <span class="token string">&quot;foobar&quot;</span><span class="token punctuation">,</span>
  completed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

todo<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">&quot;Hello&quot;</span> <span class="token comment">// Error: cannot reassign a readonly property</span>
todo<span class="token punctuation">.</span>description <span class="token operator">=</span> <span class="token string">&quot;barFoo&quot;</span> <span class="token comment">// Error: cannot reassign a readonly property</span>
todo<span class="token punctuation">.</span>completed <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// OK</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MyReadonly2<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>K extends keyof T = keyof T</code>ï¼šå¦‚æœä¸ä¼ é€’ï¼Œåˆ™é»˜è®¤å€¼ä¸º<code>keyof T</code>ï¼Œæ„å‘³ç€å…¨éƒ¨å±æ€§éƒ½æ·»åŠ readonlyã€‚</li></ul> <h2 id="deepreadonly"><a href="#deepreadonly" class="header-anchor">#</a> DeepReadonly</h2> <blockquote><p><code>DeepReadonly&lt;T&gt;</code>è¡¨ç¤ºå°†Tç±»å‹çš„æ¯ä¸ªå‚æ•°åŠå…¶å­å¯¹è±¡é€’å½’åœ°è®¾ä¸ºåªè¯»ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">X</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token number">1</span>
    b<span class="token operator">:</span> <span class="token string">'hi'</span>
  <span class="token punctuation">}</span>
  y<span class="token operator">:</span> <span class="token string">'hey'</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Todo</span> <span class="token operator">=</span> DeepReadonly<span class="token operator">&lt;</span><span class="token constant">X</span><span class="token operator">&gt;</span>

æœŸæœ›çš„ç»“æœğŸ‘‡
<span class="token keyword">type</span> <span class="token class-name">Expected</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> x<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> a<span class="token operator">:</span> <span class="token number">1</span>
    <span class="token keyword">readonly</span> b<span class="token operator">:</span> <span class="token string">'hi'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">readonly</span> y<span class="token operator">:</span> <span class="token string">'hey'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">DeepReadonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span><span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">}</span> <span class="token operator">?</span> DeepReadonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>T[P] extends { [key: string]: any }</code>ï¼šè¿™æ®µè¡¨ç¤ºT[P]æ˜¯å¦æ˜¯ä¸€ä¸ªåŒ…å«ç´¢å¼•ç­¾åçš„å­—æ®µï¼Œå¦‚æœåŒ…å«æˆ‘ä»¬è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªåµŒå¥—å¯¹è±¡ï¼Œå°±å¯ä»¥é€’å½’è°ƒç”¨DeepReadonlyã€‚</li></ul> <h2 id="tupletounion"><a href="#tupletounion" class="header-anchor">#</a> TupleToUnion</h2> <blockquote><p><code>TupleToUnion&lt;T&gt;</code>ç”¨æ¥å°†ä¸€ä¸ªå…ƒç»„ç±»å‹Tè½¬æ¢æˆè”åˆç±»å‹.</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Arr</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span>

<span class="token comment">// &quot;1&quot; | &quot;2&quot; | &quot;3&quot;</span>
<span class="token keyword">type</span> <span class="token class-name">Test</span> <span class="token operator">=</span> TupleToUnion<span class="token operator">&lt;</span>Arr<span class="token operator">&gt;</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code>æ–¹æ³•ä¸€ï¼š
<span class="token keyword">type</span> <span class="token class-name">TupleToUnion<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span>

æ–¹æ³•äºŒï¼š
<span class="token keyword">type</span> <span class="token class-name">TupleToUnion<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token constant">L</span> <span class="token operator">|</span> TupleToUnion<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>T[number]</code>ï¼šå®ƒä¼šè‡ªåŠ¨è¿­ä»£å…ƒç»„çš„æ•°å­—å‹ç´¢å¼•ï¼Œç„¶åå°†æ‰€ä»¥å…ƒç´ ç»„åˆæˆä¸€ä¸ªè”åˆç±»å‹ã€‚</li> <li><code>L | TupleToUnion&lt;R&gt;</code>ï¼šLè¡¨ç¤ºæ¯ä¸€æ¬¡è¿­ä»£ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒçš„è¿­ä»£è¿‡ç¨‹å¯ä»¥ç”¨ä¸‹é¢ä¼ªä»£ç è¡¨ç¤ºï¼š</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ç¬¬ä¸€æ¬¡è¿­ä»£</span>
<span class="token keyword">const</span> <span class="token constant">L</span> <span class="token operator">=</span> <span class="token string">'1'</span>
<span class="token keyword">const</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token string">'1'</span> <span class="token operator">|</span> TupleToUnion<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span>

<span class="token comment">// ç¬¬äºŒæ¬¡è¿­ä»£</span>
<span class="token keyword">const</span> <span class="token constant">L</span> <span class="token operator">=</span> <span class="token string">'2'</span>
<span class="token keyword">const</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'3'</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token string">'1'</span> <span class="token operator">|</span> <span class="token string">'2'</span> <span class="token operator">|</span> TupleToUnion<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span>

<span class="token comment">// ç¬¬ä¸‰æ¬¡è¿­ä»£</span>
<span class="token keyword">const</span> <span class="token constant">L</span> <span class="token operator">=</span> <span class="token string">'3'</span>
<span class="token keyword">const</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token string">'1'</span> <span class="token operator">|</span> <span class="token string">'2'</span> <span class="token operator">|</span> <span class="token string">'3'</span>
</code></pre></div><h2 id="last"><a href="#last" class="header-anchor">#</a> Last</h2> <blockquote><p><code>Last&lt;T&gt;</code>ç”¨æ¥è·å–æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">arr1</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name">arr2</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>

<span class="token keyword">type</span> <span class="token class-name">tail1</span> <span class="token operator">=</span> Last<span class="token operator">&lt;</span>arr1<span class="token operator">&gt;</span> <span class="token comment">// expected to be 'c'</span>
<span class="token keyword">type</span> <span class="token class-name">tail2</span> <span class="token operator">=</span> Last<span class="token operator">&lt;</span>arr2<span class="token operator">&gt;</span> <span class="token comment">// expected to be 1</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// way1ï¼šç´¢å¼•æ€æƒ³</span>
<span class="token keyword">type</span> <span class="token class-name">Last<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

<span class="token comment">// way2: åå ä½æ€æƒ³</span>
<span class="token keyword">type</span> <span class="token class-name">Last<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token punctuation">,</span> <span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>[any, ...T]</code>ï¼šè¡¨ç¤ºæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¹¶æ·»åŠ äº†ä¸€ä¸ªæ–°å…ƒç´ åˆ°ç¬¬ä¸€ä¸ªä½ç½®ï¼Œç„¶åæŠŠåŸæ•°ç»„Tä¸­çš„å…ƒç´ ä¾æ¬¡æ‰©å±•åˆ°æ–°æ•°ç»„ä¸­ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹ä¼ªä»£ç è¡¨ç¤ºï¼š</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// åŸæ•°ç»„</span>
<span class="token keyword">const</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token comment">// æ–°æ•°ç»„</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token comment">// ç»“æœ: 3</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><h2 id="chainable-å¯ä¸²è”æ„é€ å™¨"><a href="#chainable-å¯ä¸²è”æ„é€ å™¨" class="header-anchor">#</a> Chainable(å¯ä¸²è”æ„é€ å™¨)</h2> <blockquote><p><code>Chainable&lt;T&gt;</code> ç”¨æ¥è®©ä¸€ä¸ªå¯¹è±¡å¯ä»¥è¿›è¡Œé“¾å¼è°ƒç”¨</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">const</span> config<span class="token operator">:</span> Chainable<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>

<span class="token keyword">const</span> res <span class="token operator">=</span> config
  <span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'Hello'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'TypeScript'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Chainable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token generic-function"><span class="token function">options</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">)</span><span class="token operator">:</span> Chainable<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span><span class="token punctuation">[</span>k <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>{[k in K]: V}</code>ï¼šæ¯æ¬¡è°ƒç”¨optionsæ—¶ï¼ŒæŠŠkey/valueæ„é€ æˆä¸€ä¸ªå¯¹è±¡ï¼Œä¾‹å¦‚ï¼š<code>{ foo: 123 }</code>ã€‚</li> <li><code>T &amp; {[k in K]: V}</code>ï¼šæ­¤å¤„ä½¿ç”¨åˆ° <code>&amp;</code> å…³é”®è¯ï¼Œç”¨æ¥åˆå¹¶ <code>T</code> å’Œ <code>{[k in K]: V}</code> ä¸¤ä¸ªå¯¹è±¡ä¸­çš„æ‰€æœ‰<code>key</code>ã€‚</li> <li><code>Chainable&lt;&gt;</code>ï¼šé€’å½’è°ƒç”¨ <code>Chainable</code> ï¼Œèµ‹äºˆæ–°å¯¹è±¡ä»¥é“¾å¼è°ƒç”¨çš„èƒ½åŠ›ã€‚</li></ul> <h2 id="pop"><a href="#pop" class="header-anchor">#</a> Pop</h2> <blockquote><p><code>Pop&lt;T&gt;</code> æ¥æ”¶ä¸€ä¸ªæ•°ç»„ <code>T</code> å¹¶è¿”å›åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ çš„æ–°æ•°ç»„ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">arr1</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name">arr2</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>

<span class="token keyword">type</span> <span class="token class-name">re1</span> <span class="token operator">=</span> Pop<span class="token operator">&lt;</span>arr1<span class="token operator">&gt;</span> <span class="token comment">// expected to be []</span>
<span class="token keyword">type</span> <span class="token class-name">re2</span> <span class="token operator">=</span> Pop<span class="token operator">&lt;</span>arr2<span class="token operator">&gt;</span> <span class="token comment">// expected to be [3, 2]</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Pop<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token punctuation">,</span> <span class="token keyword">infer</span> <span class="token constant">R</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token constant">L</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><h2 id="lookup-æŸ¥æ‰¾"><a href="#lookup-æŸ¥æ‰¾" class="header-anchor">#</a> LookUp(æŸ¥æ‰¾)</h2> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'cat'</span>
  color<span class="token operator">:</span> <span class="token string">'black'</span> <span class="token operator">|</span> <span class="token string">'orange'</span> <span class="token operator">|</span> <span class="token string">'gray'</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'dog'</span>
  color<span class="token operator">:</span> <span class="token string">'white'</span>
  name<span class="token operator">:</span> <span class="token string">'wang'</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç»“æœï¼šDog</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> LookUp<span class="token operator">&lt;</span>Cat <span class="token operator">|</span> Dog<span class="token punctuation">,</span> <span class="token string">'dog'</span><span class="token operator">&gt;</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">LookUp<span class="token operator">&lt;</span>
  <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token constant">U</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>U extends { type: string; }</code>ï¼šé™åˆ¶Uçš„ç±»å‹å¿…é¡»æ˜¯å…·æœ‰å±æ€§ä¸ºtypeçš„å¯¹è±¡</li></ul> <h2 id="promiseallè¿”å›ç±»å‹"><a href="#promiseallè¿”å›ç±»å‹" class="header-anchor">#</a> PromiseAllè¿”å›ç±»å‹</h2> <blockquote><p><code>PromiseAll</code>æ˜¯ç”¨æ¥å–Promise.all()å‡½æ•°æ‰€æœ‰è¿”å›çš„ç±»å‹</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ç»“æœï¼šPromise&lt;[number, number, number]&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> <span class="token function">PromiseAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š
ä¸ä¹‹å‰çš„ä¾‹å­ä¸åŒï¼ŒPromiseAllæˆ‘ä»¬å£°æ˜çš„æ˜¯ä¸€ä¸ªfunctionè€Œä¸æ˜¯typeã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">PromiseAllType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>git
<span class="token punctuation">}</span><span class="token operator">&gt;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">PromiseAll</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>values<span class="token operator">:</span> <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> PromiseAllType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li>å› ä¸º<code>Promise.all()</code>å‡½æ•°æ¥å—çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå› æ­¤æ³›å‹<code>T</code>é™åˆ¶ä¸ºä¸€ä¸ª<code>any[]</code>ç±»å‹çš„æ•°ç»„ã€‚</li> <li><code>PromiseAllType</code>çš„å®ç°æ€è·¯æœ‰ç‚¹åƒä¹‹å‰çš„<code>PromiseType</code>ï¼Œåªä¸è¿‡è¿™é‡Œå¤šäº†ä¸€å±‚<code>Promise</code>çš„åŒ…è£¹ï¼Œå› ä¸º<code>Promise.all()</code>çš„è¿”å›ç±»å‹ä¹Ÿæ˜¯ä¸€ä¸ª<code>Promise</code>ã€‚</li></ul> <h2 id="trimã€trimleftä»¥åŠtrimright"><a href="#trimã€trimleftä»¥åŠtrimright" class="header-anchor">#</a> Trimã€TrimLeftä»¥åŠTrimRight</h2> <blockquote><p><code>Trimã€TrimLeftä»¥åŠTrimRight</code>éƒ½æ˜¯ç”¨æ¥å»é™¤ç©ºæ ¼çš„ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> t1 <span class="token operator">=</span> TrimLeft<span class="token operator">&lt;</span><span class="token string">' str'</span><span class="token operator">&gt;</span>  <span class="token comment">// 'str'</span>
<span class="token keyword">const</span> t2 <span class="token operator">=</span> Trim<span class="token operator">&lt;</span><span class="token string">' str '</span><span class="token operator">&gt;</span>     <span class="token comment">// 'str'</span>
<span class="token keyword">const</span> t3 <span class="token operator">=</span> TrimRight<span class="token operator">&lt;</span><span class="token string">'str '</span><span class="token operator">&gt;</span> <span class="token comment">// 'str'</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Space</span> <span class="token operator">=</span> <span class="token string">' '</span> <span class="token operator">|</span> <span class="token string">'\n'</span> <span class="token operator">|</span> <span class="token string">'\t'</span>
<span class="token keyword">type</span> <span class="token class-name">TrimLeft<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Space<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> TrimLeft<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">S</span>
<span class="token keyword">type</span> <span class="token class-name">Trim<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Space<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">|</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Space<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> Trim<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">S</span>
<span class="token keyword">type</span> <span class="token class-name">TrimRight<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Space<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> TrimRight<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">S</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>TrimLeft</code> å’Œ <code>TrimRight</code> çš„å®ç°æ€è·¯æ˜¯ç›¸åŒçš„ï¼ŒåŒºåˆ«åœ¨äºç©ºç™½ç¬¦çš„å ä½å‡ºç°åœ¨å·¦ä¾§è¿˜æ˜¯å³ä¾§ã€‚</li> <li><code>Trim</code> çš„å®ç°å°±æ˜¯æŠŠ <code>TrimLeft</code> å’Œ <code>TrimRight</code> æ‰€åšçš„äº‹æƒ…ç»“åˆèµ·æ¥ã€‚</li></ul> <h2 id="uncapatilize-é¦–å­—æ¯å°å†™"><a href="#uncapatilize-é¦–å­—æ¯å°å†™" class="header-anchor">#</a> Uncapatilize(é¦–å­—æ¯å°å†™)</h2> <blockquote><p><code>Uncapatilize&lt;T&gt;</code>æ˜¯ç”¨æ¥å°†ä¸€ä¸ªå­—ç¬¦ä¸²çš„é¦–å­—æ¯å˜æˆå°å†™çš„ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">t2</span> <span class="token operator">=</span> Uncapatilize<span class="token operator">&lt;</span><span class="token string">'Christine'</span><span class="token operator">&gt;</span> <span class="token comment">// 'christine'</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Uncapatilize<span class="token operator">&lt;</span><span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> firstLetter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Lowercase<span class="token operator">&lt;</span>firstLetter<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token constant">S</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>Uncapatilize&lt;firstLetter&gt;</code>: æˆ‘ä»¬åªéœ€è¦é¦–å­—æ¯ç”¨firstLetterå ä½ï¼Œç”¨å·¥å…·å‡½æ•° <code>Uncapatilize</code> å°†é¦–å­—æ¯å˜æˆå°å†™ã€‚</li></ul> <h2 id="replace"><a href="#replace" class="header-anchor">#</a> Replace</h2> <blockquote><p><code>Replace&lt;T&gt;</code> æ˜¯ç”¨æ¥å°†å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„æŸæ®µå†…å®¹ï¼Œä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦ä¸²è¿›è¡Œæ›¿æ¢ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 'IamPicker'</span>
<span class="token keyword">type</span> <span class="token class-name">t</span> <span class="token operator">=</span> Replace<span class="token operator">&lt;</span><span class="token string">'IamChristine'</span><span class="token punctuation">,</span> <span class="token string">'Christine'</span><span class="token punctuation">,</span> <span class="token string">'Picker'</span><span class="token operator">&gt;</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Replace<span class="token operator">&lt;</span>
  <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  from <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  to <span class="token keyword">extends</span> <span class="token builtin">string</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">S</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">from</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">?</span> from <span class="token keyword">extends</span> <span class="token string">''</span>
        <span class="token operator">?</span> <span class="token constant">S</span>
        <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>to<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">:</span> <span class="token constant">S</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li><code>${infer L}${from}${infer R}</code>: <code>infer L</code> æ˜¯ <code>Iam</code> çš„å ä½ï¼Œ<code>form</code>æ˜¯<code>Christine</code>ï¼Œ<code>infer R</code>æ˜¯ <code>ç©ºå­—ç¬¦ä¸²</code> çš„å ä½ã€‚</li></ul> <h2 id="replaceall"><a href="#replaceall" class="header-anchor">#</a> ReplaceAll</h2> <blockquote><p><code>ReplaceAll&lt;T&gt;</code> æ˜¯ç”¨æ¥å°†å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æŸæ®µå†…å®¹ï¼Œä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦ä¸²è¿›è¡Œå…¨å±€æ›¿æ¢ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 'IamPickerï¼ŒIamPickeryeah'</span>
<span class="token keyword">type</span> <span class="token class-name">t</span> <span class="token operator">=</span> Replace<span class="token operator">&lt;</span><span class="token string">'IamChristineï¼ŒIamChristineyeah'</span><span class="token punctuation">,</span> <span class="token string">'Christine'</span><span class="token punctuation">,</span> <span class="token string">'Picker'</span><span class="token operator">&gt;</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ReplaceAll<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> from <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> to <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">from</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> 
  <span class="token operator">?</span> from <span class="token keyword">extends</span> <span class="token string">''</span> 
    <span class="token operator">?</span> <span class="token constant">T</span>
    <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ReplaceAll<span class="token operator">&lt;</span><span class="token constant">L</span><span class="token punctuation">,</span> from<span class="token punctuation">,</span> to<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>to<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ReplaceAll<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> from <span class="token punctuation">,</span>to<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">:</span> <span class="token constant">T</span>
</code></pre></div><h2 id="appendargument-å‡½æ•°è¿½åŠ å½¢å‚"><a href="#appendargument-å‡½æ•°è¿½åŠ å½¢å‚" class="header-anchor">#</a> AppendArgumentï¼ˆå‡½æ•°è¿½åŠ å½¢å‚ï¼‰</h2> <blockquote><p><code>AppendArgument&lt;Fn, A&gt;</code>å¯¹äºç»™å®šçš„å‡½æ•°ç±»å‹ Fnï¼Œä»¥åŠä¸€ä¸ªä»»æ„ç±»å‹ Aï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•° Gã€‚G æ‹¥æœ‰ Fn çš„æ‰€æœ‰å‚æ•°å¹¶åœ¨æœ«å°¾è¿½åŠ ç±»å‹ä¸º A çš„å‚æ•°ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

<span class="token comment">// (args_0: number, args_1: string, args_2: boolean) =&gt; number</span>
<span class="token keyword">type</span> <span class="token class-name">Result</span> <span class="token operator">=</span> AppendArgument<span class="token operator">&lt;</span>Fn<span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span> 
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">AppendArgument<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token keyword">infer</span> Params<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> Res <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>Params<span class="token punctuation">,</span> <span class="token constant">A</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Res <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div><h2 id="permutation"><a href="#permutation" class="header-anchor">#</a> Permutation</h2> <blockquote><p><code>Permutation&lt;T&gt;</code></p></blockquote> <h2 id="lengthofstring"><a href="#lengthofstring" class="header-anchor">#</a> LengthOfString</h2> <blockquote><p><code>LengthOfString&lt;T extends string, U extends string[] = []&gt;</code>ç”¨æ¥è®¡ç®—ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">result</span> <span class="token operator">=</span> LengthOfString<span class="token operator">&lt;</span><span class="token string">'Hello'</span><span class="token operator">&gt;</span> <span class="token comment">// 5</span>
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">LengthOfString<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> firstLetter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">?</span> LengthOfString<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">U</span><span class="token punctuation">,</span> firstLetter<span class="token punctuation">]</span><span class="token operator">&gt;</span>
  <span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
</code></pre></div><p>ä»£ç è¯¦è§£ï¼š</p> <ul><li>æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ³›å‹çš„è¾…åŠ©æ•°ç»„æ¥å¸®è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåœ¨ç¬¬ä¸€æ¬¡ç¬¦åˆæ¡ä»¶æ—¶ï¼Œå°†å…¶ç¬¬ä¸€ä¸ªå­—ç¬¦æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼Œåœ¨åç»­çš„é€’å½’è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸ç¬¦åˆæ¡ä»¶ï¼Œç›´æ¥è¿”å›T['length']ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç”¨å¦‚ä¸‹ä»£ç è¡¨ç¤ºï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;!-- ç¬¬ä¸€æ¬¡é€’å½’ --&gt;
T: 'Hello' firstLetter: 'H' R: 'ello' U: ['H']
&lt;!-- ç¬¬äºŒæ¬¡é€’å½’ --&gt;
T: 'ello'  firstLetter: 'e' R: 'llo'  U: ['H', 'e']
&lt;!-- ç¬¬ä¸‰æ¬¡é€’å½’ --&gt;
T: 'llo'   firstLetter: 'l' R: 'lo'   U: ['H', 'e', 'l']
&lt;!-- ç¬¬å››æ¬¡é€’å½’ --&gt;
T: 'lo'    firstLetter: 'l' R: 'o'    U: ['H', 'e', 'l', 'l']
&lt;!-- ç¬¬äº”æ¬¡é€’å½’ --&gt;
T: 'o'     firstLetter: 'o' R: ''     U: ['H', 'e', 'l'ï¼Œ 'l', 'o']
</code></pre></div><p>å½“ <code>T</code> ä¸ºç©ºæ—¶ï¼Œinfer å ä½éœ€è¦å†…å®¹ï¼Œ<code>firstLetter</code> å’Œ <code>R</code> éœ€è¦æœ‰ä¸€ä¸ªæœ‰å†…å®¹ï¼Œæ­¤æ—¶ T extends <code>${infer firstLetter}${infer R}</code>ä¸ºfalseï¼Œæ‰€ä»¥ä¼šæ‰§è¡ŒU['length']</p> <h2 id="flatten-æ•°ç»„é™ç»´"><a href="#flatten-æ•°ç»„é™ç»´" class="header-anchor">#</a> Flatten(æ•°ç»„é™ç»´)</h2> <blockquote><p><code>Flatten&lt;T&gt;</code> å°†å¤šç»´æ•°ç»„å˜ä¸ºä¸€ç»´æ•°ç»„ã€‚</p></blockquote> <p>ç”¨æ³•ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// [1, 2, 3, 4, 5]</span>
<span class="token keyword">type</span> <span class="token class-name">flatten</span> <span class="token operator">=</span> Flatten<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 
</code></pre></div><p>ä»£ç å®ç°ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Flatten<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token keyword">infer</span> <span class="token constant">L</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">infer</span> Rest<span class="token punctuation">]</span>
      <span class="token operator">?</span> <span class="token constant">L</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>Flatten<span class="token operator">&lt;</span><span class="token constant">L</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span>Flatten<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token punctuation">]</span>
        <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">L</span><span class="token punctuation">,</span> <span class="token operator">...</span>Flatten<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token punctuation">]</span>
      <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°æ—¶é—´:</span> <span class="time">5/21/2022, 4:34:14 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/blog/typescript/challengeBuildIn.html" class="prev">
        TypeScriptå†…ç½®å·¥å…·ç±»å‹
      </a></span> <span class="next"><a href="/blog/typescript/tsconfig.html">
        tsconfig.jsonä»‹ç»
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.3faf3b5a.js" defer></script><script src="/blog/assets/js/2.f21ef004.js" defer></script><script src="/blog/assets/js/44.be0279d9.js" defer></script>
  </body>
</html>
