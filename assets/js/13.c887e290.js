(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{527:function(t,s,a){"use strict";a.r(s);var l=a(76),n=Object(l.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"前端自动化部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端自动化部署"}},[t._v("#")]),t._v(" 前端自动化部署")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("以云效为例")])]),t._v(" "),a("h2",{attrs:{id:"流水线创建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#流水线创建"}},[t._v("#")]),t._v(" 流水线创建")]),t._v(" "),a("ol",[a("li",[t._v("新建流水线")]),t._v(" "),a("li",[t._v("前端选择Node.js流水线模版")])]),t._v(" "),a("h2",{attrs:{id:"自动化部署流程配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动化部署流程配置"}},[t._v("#")]),t._v(" 自动化部署流程配置")]),t._v(" "),a("ol",[a("li",[t._v("添加流水线源\n"),a("ul",[a("li",[t._v("选择云效Codeup")]),t._v(" "),a("li",[t._v("选择需要自动化部署的代码仓库")]),t._v(" "),a("li",[t._v("默认分支选择 "),a("code",[t._v("master")])]),t._v(" "),a("li",[t._v("开启代码源出发选项")]),t._v(" "),a("li",[t._v("触发事件建议选择合并请求完成后")]),t._v(" "),a("li",[t._v("过滤条件输入 "),a("code",[t._v("master")])])])]),t._v(" "),a("li",[t._v("配置测试流程(目前没用到)")]),t._v(" "),a("li",[t._v("构建")])]),t._v(" "),a("blockquote",[a("p",[t._v("通过cnpm install 完成依赖包安装")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Node.js\n构建命令 "),a("code",[t._v("cnpm install && npm run build")])])]),t._v(" "),a("li",[a("p",[t._v("构建物上传\n"),a("img",{attrs:{src:"/blog/construct.png",alt:"alt 构建物上传"}})])])]),t._v(" "),a("ol",[a("li",[t._v("部署\n"),a("ul",[a("li",[t._v("选择主机部署")]),t._v(" "),a("li",[t._v("选择制品名称")]),t._v(" "),a("li",[t._v("新建主机组")]),t._v(" "),a("li",[t._v("城市选择上海")]),t._v(" "),a("li",[t._v("部署配置下载路径一定是dist包上传到nginx的根目录下")]),t._v(" "),a("li",[t._v("执行用户写 "),a("code",[t._v("root")])]),t._v(" "),a("li",[t._v("部署脚本")])])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/nginx/html/\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf dist\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建dist文件夹")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" dist\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解压压缩包")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf dist.tgz -C dist\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 移除tgz包")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf dist.tgz\n    /usr/local/nginx/sbin/nginx -s reload\n\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);